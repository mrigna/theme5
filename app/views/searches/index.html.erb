<h1>Advanced Search</h1>
<div><%= link_to "Home", root_path %> |<%= link_to "Reset", search_path, method: :get %></div>
<br />
<%= search_form_for @q, url: search_searches_path, method: :post do |f| %>
  <%= f.condition_fields do |c| %>
  <%= render "condition_fields", f: c%>
  <% end %>
  
  <p><%= link_to_add_fields "Add Conditions", f, :condition %></p>
  <div class="actions"><%= f.submit "Search", class: "button radius"  %></div>

<% end %>


<table role="grid" width="100%">
  <thead>
    <tr>
      <th>Theme ID</th>
      <th>Node ID</th>
      <th>Dg</th>
      <th>Theme Title</th>
      <th>Theme keywords</th>
      <th>Link to Theme</th>
      <th>Link to Node</th>
      
     </tr>
    </thead> 
  
  <tbody>
    <% @search.each do |t| %>      
        <tr>
          <% unless t.metadata.nil? or t.node.nil?%>
          <td><%= t.contentID %></td>
          <td><%= t.node.nodeID %></td>
          <td><%= t.node.dg %></td>
          <td><%= t.metadata.title %></td>
          <td><%= t.metadata.keywords %></td>
          <td><%= link_to "Show content", theme_path(t)  %></td>
          <td><%= link_to "Go to node", root_path + "themes/#{t.node.id}/index" %></td>
          <% end %>
        </tr>     
    <% end %>
  </tbody>
</table>

